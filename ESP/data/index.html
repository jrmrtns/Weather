<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width,initial-scale=1"> <title>Svelte app</title> <link rel="icon" type="image/png" href="data:undefined;base64,"> <style>html, body{ position:relative;width:100%;height:100%;}body{ background-color:#1e2933;color:#ddd;margin:0;padding:8px;box-sizing:border-box;font-family:-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif;}a{ color:rgb(0,100,200);text-decoration:none;}a:hover{ text-decoration:underline;}a:visited{ color:rgb(0,80,160);}label{ display:block;}input, button, select, textarea{ font-family:inherit;font-size:inherit;-webkit-padding:0.4em 0;padding:0.4em;margin:0 0 0.5em 0;box-sizing:border-box;border:1px solid #ccc;border-radius:2px;}input:disabled{ color:#ccc;}button{ color:#333;background-color:#f4f4f4;outline:none;}button:disabled{ color:#999;}button:not(:disabled):active{ background-color:#ddd;}button:focus{ border-color:#666;}</style> <style>main.svelte-l2bmdz{display:flex;flex-wrap:wrap;justify-content:center;padding:1em;margin:0 auto;background-color:#1e2933;color:#b9cddf;padding:0;margin:0}h1{color:#ff3e00;text-transform:uppercase;font-size:4em;font-weight:100}.gauge-container > .gauge > .dial{stroke:#334455;stroke-width:2}.gauge-container > .gauge > .value{stroke:orange;stroke-dasharray:none;stroke-width:6}@media(min-width:640px){main.svelte-l2bmdz{max-width:none}}.gauge-container.svelte-l2bmdz{justify-content:center;width:450px;height:450px;padding:10px}.gauge-container.svelte-l2bmdz{height:auto}</style> </head> <body> </body> <script>var app=function(){"use strict";function t(){}function n(t){return t()}function e(){return Object.create(null)}function o(t){t.forEach(n)}function a(t){return"function"==typeof t}function r(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function i(t,n){t.appendChild(n)}function u(t){t.parentNode.removeChild(t)}function l(t){return document.createElement(t)}function s(){return t=" ",document.createTextNode(t);var t}function c(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}let d;function f(t){d=t}function p(t){(function(){if(!d)throw new Error("Function called outside component initialization");return d})().$$.on_mount.push(t)}const m=[],h=[],g=[],v=[],b=Promise.resolve();let w=!1;function $(t){g.push(t)}let y=!1;const x=new Set;function A(){if(!y){y=!0;do{for(let t=0;t<m.length;t+=1){const n=m[t];f(n),_(n.$$)}for(f(null),m.length=0;h.length;)h.pop()();for(let t=0;t<g.length;t+=1){const n=g[t];x.has(n)||(x.add(n),n())}g.length=0}while(m.length);for(;v.length;)v.pop()();w=!1,y=!1,x.clear()}}function _(t){if(null!==t.fragment){t.update(),o(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach($)}}const k=new Set;function C(t,n){-1===t.$$.dirty[0]&&(m.push(t),w||(w=!0,b.then(A)),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function M(r,i,l,s,c,p,m=[-1]){const h=d;f(r);const g=i.props||{},v=r.$$={fragment:null,ctx:null,props:p,update:t,not_equal:c,bound:e(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(h?h.$$.context:[]),callbacks:e(),dirty:m,skip_bound:!1};let b=!1;if(v.ctx=l?l(r,g,((t,n,...e)=>{const o=e.length?e[0]:n;return v.ctx&&c(v.ctx[t],v.ctx[t]=o)&&(!v.skip_bound&&v.bound[t]&&v.bound[t](o),b&&C(r,t)),n})):[],v.update(),b=!0,o(v.before_update),v.fragment=!!s&&s(v.ctx),i.target){if(i.hydrate){const t=function(t){return Array.from(t.childNodes)}(i.target);v.fragment&&v.fragment.l(t),t.forEach(u)}else v.fragment&&v.fragment.c();i.intro&&((w=r.$$.fragment)&&w.i&&(k.delete(w),w.i(y))),function(t,e,r){const{fragment:i,on_mount:u,on_destroy:l,after_update:s}=t.$$;i&&i.m(e,r),$((()=>{const e=u.map(n).filter(a);l?l.push(...e):o(e),t.$$.on_mount=[]})),s.forEach($)}(r,i.target,i.anchor),A()}var w,y;f(h)}var E="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var S,V,z=(function(t){!function(n,e){var o=function(t,n){var e=t.document,o=Array.prototype.slice,a=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame||function(t){return setTimeout(t,1e3/60)};function r(t){var n=t.duration,e=1,o=60*n,r=t.start||0,i=t.end-r,u=t.step,l=t.easing||function(t){return(t/=.5)<1?.5*Math.pow(t,3):.5*(Math.pow(t-2,3)+2)};function s(){var t=e/o,n=i*l(t)+r;u(n,e),e+=1,t<1&&a(s)}a(s)}return function(){var t="http://www.w3.org/2000/svg",n={centerX:50,centerY:50},a={dialRadius:40,dialStartAngle:135,dialEndAngle:45,value:0,max:100,min:0,valueDialClass:"value",valueClass:"value-text",dialClass:"dial",gaugeClass:"gauge",showValue:!0,gaugeColor:null,label:function(t){return Math.round(t)}};function i(){var t=arguments[0];return o.call(arguments,1).forEach((function(n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})),t}function u(n,o,a){var r=e.createElementNS(t,n);for(var i in o)r.setAttribute(i,o[i]);return a&&a.forEach((function(t){r.appendChild(t)})),r}function l(t,n){return t*n/100}function s(t,n,e){var o=Number(t);return o>e?e:o<n?n:o}function c(t,n,e){return 100*(t-n)/(e-n)}function d(t,n,e,o){var a=o*Math.PI/180;return{x:Math.round(1e3*(t+e*Math.cos(a)))/1e3,y:Math.round(1e3*(n+e*Math.sin(a)))/1e3}}function f(t,e,o){var a=n.centerX,r=n.centerY;return{end:d(a,r,t,o),start:d(a,r,t,e)}}return function(t,n){var e,o,d,p=t,m=(n=i({},a,n)).max,h=n.min,g=s(n.value,h,m),v=n.dialRadius,b=n.showValue,w=n.dialStartAngle,$=n.dialEndAngle,y=n.valueDialClass,x=n.valueClass,A=(n.valueLabelClass,n.dialClass),_=n.gaugeClass,k=n.color,C=n.label,M=n.viewBox;if(w<$){console.log("WARN! startAngle < endAngle, Swapping");var E=w;w=$,$=E}function S(t,n,e,o){var a=f(t,n,e),r=a.start,i=a.end,u=void 0===o?1:o;return["M",r.x,r.y,"A",t,t,0,u,1,i.x,i.y].join(" ")}function V(t){e=u("text",{x:50,y:50,fill:"#999",class:x,"font-size":"100%","font-family":"sans-serif","font-weight":"normal","text-anchor":"middle","alignment-baseline":"middle","dominant-baseline":"central"}),o=u("path",{class:y,fill:"none",stroke:"#666","stroke-width":2.5,d:S(v,w,w)});var n=l(100,360-Math.abs(w-$)),a=u("svg",{viewBox:M||"0 0 100 100",class:_},[u("path",{class:A,fill:"none",stroke:"#eee","stroke-width":2,d:S(v,w,$,n<=180?0:1)}),e,o]);t.appendChild(a)}function z(t,a){var r=l(c(t,h,m),360-Math.abs(w-$)),i=r<=180?0:1;b&&(e.textContent=C.call(n,t)),o.setAttribute("d",S(v,w,r+w,i))}function q(t,n){var e=k(t),a="stroke "+1e3*n+"ms ease";o.style=["stroke: "+e,"-webkit-transition: "+a,"-moz-transition: "+a,"transition: "+a].join(";")}return d={setMaxValue:function(t){m=t},setValue:function(t){g=s(t,h,m),k&&q(g,0),z(g)},setValueAnimated:function(t,n){var e=g;e!==(g=s(t,h,m))&&(k&&q(g,n),r({start:e||0,end:g,duration:n||1,step:function(t,n){z(t)}}))},getValue:function(){return g}},V(p),d.setValue(g),d}}()}(n);t.exports?t.exports=o:n.Gauge=o}("undefined"==typeof window?E:window)}(V={path:S,exports:{},require:function(t,n){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==n&&V.path)}},V.exports),V.exports);function q(n){let e,o,a,r,d,f;return{c(){e=l("main"),o=l("div"),a=s(),r=l("div"),d=s(),f=l("div"),c(o,"id","cpuSpeed"),c(o,"class","gauge-container svelte-l2bmdz"),c(r,"id","cpuSpeed"),c(r,"class","gauge-container svelte-l2bmdz"),c(f,"id","cpuSpeed"),c(f,"class","gauge-container svelte-l2bmdz"),c(e,"class","svelte-l2bmdz")},m(t,u){!function(t,n,e){t.insertBefore(n,e||null)}(t,e,u),i(e,o),n[3](o),i(e,a),i(e,r),n[4](r),i(e,d),i(e,f),n[5](f)},p:t,i:t,o:t,d(t){t&&u(e),n[3](null),n[4](null),n[5](null)}}}function N(t,n,e){let o,a,r,i,u=`ws://${window.location.hostname}/ws`;const l={min:0,max:50,dialStartAngle:135,dialEndAngle:45,value:0,label:t=>Math.round(t)+" Â°C"},s={min:950,max:1050,dialStartAngle:135,dialEndAngle:45,value:0,label:t=>Math.round(t)+" hPa"},c={min:0,max:100,dialStartAngle:135,dialEndAngle:45,value:0,label:t=>Math.round(t)+" %"};p((()=>{e(0,o=z(o,l)),e(1,a=z(a,s)),e(2,r=z(r,c)),d()}));const d=()=>{console.log("Trying to open a WebSocket connection..."),i=new WebSocket(u),i.onopen=f,i.onclose=m,i.onmessage=g},f=t=>{console.log("Connection opened"+t)},m=t=>{console.log("Connection closed"+t),setTimeout(d,5e3)},g=t=>{const n=JSON.parse(t.data);o.setValueAnimated(n.temperature,1),a.setValueAnimated(n.pressure,1),r.setValueAnimated(n.humidity,1)};return[o,a,r,function(t){h[t?"unshift":"push"]((()=>{o=t,e(0,o)}))},function(t){h[t?"unshift":"push"]((()=>{a=t,e(1,a)}))},function(t){h[t?"unshift":"push"]((()=>{r=t,e(2,r)}))}]}return new class extends class{$destroy(){!function(t,n){const e=t.$$;null!==e.fragment&&(o(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}(this,1),this.$destroy=t}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(t){var n;this.$$set&&(n=t,0!==Object.keys(n).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}{constructor(t){super(),M(this,t,N,q,r,{})}}({target:document.body,props:{}})}();
//# sourceMappingURL=bundle.js.map</script> </html>
